<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoggyLogger - Live Logs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            height: 100vh;
            overflow: hidden;
        }

        .main-layout {
            display: flex;
            height: 100vh;
        }

        .logs-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            padding: 10px;
        }

        .settings-panel {
            width: 320px;
            min-width: 320px;
            background: #252526;
            border-left: 1px solid #3c3c3c;
            overflow-y: auto;
            padding: 10px;
            position: relative;
        }

        /* Resize handle */
        .resize-handle {
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            cursor: ew-resize;
            background: transparent;
            z-index: 100;
        }

        .resize-handle:hover {
            background: #0e639c;
        }

        .settings-section {
            background: #2d2d30;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .settings-section h3 {
            color: #4ec9b0;
            font-size: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header {
            background: #2d2d30;
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            color: #4ec9b0;
            font-size: 18px;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #f44336;
            animation: pulse 2s infinite;
        }

        .status-indicator.connected {
            background: #4caf50;
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .controls {
            background: #2d2d30;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        button {
            padding: 6px 12px;
            background: #0e639c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
        }

        button:hover {
            background: #1177bb;
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
        }

        button.recording {
            background: #f44336 !important;
        }

        button#recordBtn {
            background: #4caf50;
        }

        button.small {
            padding: 4px 8px;
            font-size: 11px;
        }

        button.danger {
            background: #f44336;
        }

        button.danger:hover {
            background: #d32f2f;
        }

        button.success {
            background: #4caf50;
        }

        button.success:hover {
            background: #45a049;
        }

        button.secondary {
            background: #3c3c3c;
        }

        button.secondary:hover {
            background: #555;
        }

        button.warning {
            background: #ffa500;
            color: #000;
        }

        button.warning:hover {
            background: #cc8400;
        }

        .filter-container {
            display: flex;
            flex: 1;
            min-width: 200px;
            gap: 6px;
            align-items: center;
        }

        .filter-input {
            flex: 1;
            padding: 6px 8px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            font-family: inherit;
            font-size: 12px;
        }

        .filter-input.regex-mode {
            border-color: #9c27b0;
        }

        .filter-input.regex-error {
            border-color: #f44336;
        }

        .filter-toggle {
            padding: 6px 10px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            cursor: pointer;
            font-size: 11px;
        }

        .filter-toggle:hover {
            background: #4c4c4c;
        }

        .filter-toggle.active {
            background: #9c27b0;
            border-color: #9c27b0;
            color: white;
        }

        .log-level-buttons {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .log-level-btn {
            padding: 4px 8px;
            background: #3c3c3c;
            border: 2px solid transparent;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 10px;
            text-transform: uppercase;
            transition: all 0.15s;
            opacity: 0.5;
        }

        .log-level-btn:hover {
            opacity: 0.8;
        }

        .log-level-btn.active {
            opacity: 1;
        }

        .log-level-btn.log-silly { color: #666; border-color: #666; }
        .log-level-btn.log-silly.active { background: #666; color: #fff; }
        .log-level-btn.log-verbose { color: #888; border-color: #888; }
        .log-level-btn.log-verbose.active { background: #888; color: #fff; }
        .log-level-btn.log-debug { color: #888; border-color: #888; }
        .log-level-btn.log-debug.active { background: #888; color: #fff; }
        .log-level-btn.log-log { color: #d4d4d4; border-color: #d4d4d4; }
        .log-level-btn.log-log.active { background: #d4d4d4; color: #1e1e1e; }
        .log-level-btn.log-info { color: #4ec9b0; border-color: #4ec9b0; }
        .log-level-btn.log-info.active { background: #4ec9b0; color: #1e1e1e; }
        .log-level-btn.log-success { color: #4caf50; border-color: #4caf50; }
        .log-level-btn.log-success.active { background: #4caf50; color: #1e1e1e; }
        .log-level-btn.log-warn { color: #ffa500; border-color: #ffa500; }
        .log-level-btn.log-warn.active { background: #ffa500; color: #1e1e1e; }
        .log-level-btn.log-error { color: #f44336; border-color: #f44336; }
        .log-level-btn.log-error.active { background: #f44336; color: #fff; }
        .log-level-btn.log-fatal { color: #d32f2f; border-color: #d32f2f; }
        .log-level-btn.log-fatal.active { background: #d32f2f; color: #fff; }

        .quick-select-btns {
            display: flex;
            gap: 4px;
        }

        .file-filter-input {
            width: 100%;
            padding: 6px 8px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            font-family: inherit;
            font-size: 11px;
            margin-bottom: 6px;
        }

        .file-list {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid #555;
            border-radius: 4px;
            background: #1e1e1e;
        }

        .file-item {
            padding: 6px 8px;
            cursor: pointer;
            border-bottom: 1px solid #333;
            font-size: 11px;
            transition: background-color 0.15s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-item:last-child {
            border-bottom: none;
        }

        .file-item:hover {
            background: #3c3c3c;
        }

        .file-item.selected {
            background: #0e639c;
            color: white;
        }

        .file-item .directory {
            color: #858585;
            font-size: 10px;
        }

        .file-item.selected .directory {
            color: #ccc;
        }

        .file-item .file-name-part {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .file-item .line-filter-btn {
            padding: 2px 4px;
            font-size: 9px;
            background: #3c3c3c;
            border: 1px solid #555;
            color: #d4d4d4;
            border-radius: 3px;
            cursor: pointer;
            margin-left: 4px;
            opacity: 0;
            transition: opacity 0.15s;
        }

        .file-item:hover .line-filter-btn,
        .file-item.selected .line-filter-btn {
            opacity: 1;
        }

        .file-item .line-filter-btn:hover {
            background: #555;
        }

        .file-item .line-filter-btn.active {
            background: #ffa500;
            color: #000;
            border-color: #ffa500;
        }

        .slider-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .slider-group:last-child {
            margin-bottom: 0;
        }

        .slider-group label {
            color: #858585;
            font-size: 11px;
            white-space: nowrap;
            min-width: 70px;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            background: #3c3c3c;
            border-radius: 2px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            background: #0e639c;
            border-radius: 50%;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            background: #0e639c;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .slider-value {
            background: #3c3c3c;
            padding: 2px 6px;
            border-radius: 3px;
            min-width: 40px;
            text-align: center;
            font-size: 11px;
        }

        .logs-header {
            background: #2d2d30;
            padding: 8px 12px;
            border-radius: 6px 6px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logs-header .stats {
            display: flex;
            gap: 15px;
            font-size: 11px;
            color: #858585;
        }

        .checks-results {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            max-width: 300px;
        }

        .display-mode-toggle {
            display: flex;
            gap: 4px;
            background: #3c3c3c;
            border-radius: 4px;
            padding: 2px;
        }

        .display-mode-btn {
            padding: 4px 10px;
            background: transparent;
            border: none;
            color: #858585;
            cursor: pointer;
            font-size: 11px;
            border-radius: 3px;
            transition: all 0.15s;
        }

        .display-mode-btn:hover {
            color: #d4d4d4;
        }

        .display-mode-btn.active {
            background: #0e639c;
            color: white;
        }

        /* Inline log display mode */
        .log-entry.inline-mode {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 4px 10px;
        }

        .log-entry.inline-mode .log-inline-date {
            color: #666;
            font-size: 10px;
            white-space: nowrap;
        }

        .log-entry.inline-mode .log-inline-type {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 10px;
            min-width: 50px;
        }

        .log-entry.inline-mode .log-inline-callline {
            color: #858585;
            font-size: 10px;
            font-style: italic;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .log-entry.inline-mode .log-inline-args {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: #ccc;
        }

        .log-entry.inline-mode .log-inline-checks {
            display: flex;
            gap: 2px;
            margin-left: auto;
        }

        .check-result-icon {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
            font-family: consolas, monospace !important;
        }

        .check-result-icon:hover {
            transform: scale(1.2);
        }

        .check-result-icon.pass {
            background: #2e7d32;
            color: #fff;
        }

        .check-result-icon.fail {
            background: #c62828;
            color: #fff;
        }

        .check-result-icon.neutral {
            background: #555;
            color: #999;
        }

        .logs-container {
            background: #1e1e1e;
            border-radius: 0 0 6px 6px;
            flex: 1;
            overflow-y: auto;
            position: relative;
            border: 1px solid #3c3c3c;
            border-top: none;
            overflow-x: hidden;
        }

        .log-entry {
            padding: 6px 10px;
            border-bottom: 1px solid #2d2d30;
            border-left: 3px solid #555;
            font-size: 12px;
            line-height: 1.4;
            word-wrap: break-word;
            cursor: pointer;
            transition: background 0.1s;
        }

        .log-entry:hover {
            background: #2a2a2a;
        }

        .log-entry.new {
            animation: fadeIn 0.1s ease-in-out;
        }

        @keyframes fadeIn {
            0% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        .log-entry.silly { border-left-color: #666; }
        .log-entry.verbose { border-left-color: #888; }
        .log-entry.debug { border-left-color: #888; }
        .log-entry.log { border-left-color: #d4d4d4; }
        .log-entry.info { border-left-color: #4ec9b0; }
        .log-entry.success { border-left-color: #4caf50; }
        .log-entry.warn { border-left-color: #ffa500; }
        .log-entry.error { border-left-color: #f44336; }
        .log-entry.fatal { border-left-color: #d32f2f; }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2px;
        }

        .log-header-left {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .log-type {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 10px;
        }

        .log-type.silly { color: #666; }
        .log-type.verbose { color: #888; }
        .log-type.debug { color: #888; }
        .log-type.log { color: #d4d4d4; }
        .log-type.info { color: #4ec9b0; }
        .log-type.success { color: #4caf50; }
        .log-type.warn { color: #ffa500; }
        .log-type.error { color: #f44336; }
        .log-type.fatal { color: #d32f2f; }

        .log-date {
            color: #666;
            font-size: 10px;
        }

        .log-checks {
            display: flex;
            gap: 2px;
        }

        .log-check-icon {
            width: 14px;
            height: 14px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
            font-family: consolas, monospace !important;
        }

        .log-detail-section .log-check-icon {
            font-size: 12px;
            font-weight: normal;
            padding: 10px 10px;
            width: auto;
        }

        .log-check-icon.pass {
            background: #2e7d32;
            color: #fff;
        }

        .log-check-icon.fail {
            background: #c62828;
            color: #fff;
        }

        .log-header-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .log-line {
            color: #858585;
            font-size: 10px;
            font-style: italic;
        }

        .log-content {
            white-space: pre-wrap;
            color: #ccc;
        }

        .log-content .highlight {
            background: #9c27b0;
            color: #fff;
            padding: 0 2px;
            border-radius: 2px;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #858585;
        }

        .selected-files-info {
            font-size: 10px;
            color: #858585;
            margin-top: 6px;
        }

        /* Disconnect overlay */
        .disconnect-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .disconnect-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .disconnect-overlay .icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .disconnect-overlay h2 {
            color: #f44336;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .disconnect-overlay p {
            color: #858585;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .disconnect-overlay .reconnect-info {
            color: #ffa500;
            font-size: 14px;
        }

        /* Scroll indicator */
        .scroll-indicator {
            position: sticky;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #0e639c;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 11px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            z-index: 100;
            text-align: center;
            width: fit-content;
            margin: 0 auto;
        }

        .scroll-indicator.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-indicator:hover {
            background: #1177bb;
        }

        /* Modal overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: #2d2d30;
            padding: 15px;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h3 {
            color: #4ec9b0;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .modal p {
            color: #858585;
            font-size: 11px;
            margin-bottom: 10px;
        }

        .line-ranges-container {
            margin-bottom: 10px;
        }

        .line-range-row {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 6px;
        }

        .line-range-row input {
            width: 70px;
            padding: 5px 6px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            font-family: inherit;
            font-size: 12px;
        }

        .line-range-row input::placeholder {
            color: #858585;
        }

        .line-range-row span {
            color: #858585;
            font-size: 11px;
        }

        .modal-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
            margin-top: 12px;
        }

        /* Checks section */
        .checks-container {
            max-height: 200px;
            overflow-y: auto;
        }

        .check-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 6px;
            background: #1e1e1e;
            border-radius: 4px;
            margin-bottom: 4px;
            font-size: 11px;
        }

        .check-item input[type="checkbox"] {
            width: 14px;
            height: 14px;
            cursor: pointer;
        }

        .check-item .check-name {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .check-item .check-avg-time {
            color: #858585;
            font-size: 9px;
            margin-left: 4px;
        }

        .check-item .check-last-time {
            color: #4ec9b0;
            font-size: 9px;
            margin-left: 2px;
        }

        .check-item .check-killed {
            color: #f44336;
            font-size: 9px;
            margin-left: 4px;
        }

        .check-item .check-actions {
            display: flex;
            gap: 4px;
        }

        .check-item button {
            padding: 2px 6px;
            font-size: 10px;
        }

        .checks-header-actions {
            display: flex;
            gap: 4px;
        }

        .add-check-btn {
            width: 100%;
            margin-top: 6px;
        }

        /* Check modal */
        .check-modal {
            max-width: 600px;
        }

        .check-modal textarea {
            width: 100%;
            height: 150px;
            background: #1e1e1e;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 10px;
            resize: vertical;
        }

        .check-modal input[type="text"] {
            width: 100%;
            padding: 8px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            font-family: inherit;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .check-params {
            background: #1e1e1e;
            padding: 8px;
            border-radius: 4px;
            font-size: 11px;
            color: #858585;
            margin-bottom: 10px;
        }

        .check-params code {
            color: #4ec9b0;
        }

        /* Checks filter section */
        .checks-filter-container {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .check-filter-chip {
            padding: 3px 8px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 12px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .check-filter-chip:hover {
            background: #4c4c4c;
        }

        .check-filter-chip.active {
            background: #0e639c;
            border-color: #0e639c;
        }

        /* Log detail popup */
        .log-detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            display: flex;
            flex-direction: column;
        }

        .log-detail-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .log-detail-header {
            background: #2d2d30;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #3c3c3c;
        }

        .log-detail-header h2 {
            color: #4ec9b0;
            font-size: 16px;
        }

        .log-detail-header .close-btn {
            background: none;
            border: none;
            color: #858585;
            font-size: 24px;
            cursor: pointer;
            padding: 0 10px;
        }

        .log-detail-header .close-btn:hover {
            color: #fff;
        }

        .log-detail-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .log-detail-section {
            background: #252526;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .log-detail-section h4 {
            color: #4ec9b0;
            font-size: 13px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .log-detail-section pre {
            background: #1e1e1e;
            padding: 12px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .log-detail-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .log-detail-meta-item {
            background: #1e1e1e;
            padding: 10px;
            border-radius: 4px;
        }

        .log-detail-meta-item label {
            color: #858585;
            font-size: 10px;
            display: block;
            margin-bottom: 4px;
        }

        .log-detail-meta-item span {
            font-size: 12px;
        }

        .copy-buttons {
            display: flex;
            gap: 8px;
        }

        .copy-buttons button {
            font-size: 11px;
            padding: 4px 10px;
        }

        /* Toast container */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 20000;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .toast {
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 250px;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: translateX(120%);
            transition: transform 0.3s ease;
        }

        .toast.toast-visible {
            transform: translateX(0);
        }

        .toast.toast-hiding {
            transform: translateX(120%);
        }

        .toast-success {
            background: #2e7d32;
            color: #fff;
        }

        .toast-error {
            background: #c62828;
            color: #fff;
        }

        .toast-warning {
            background: #f57c00;
            color: #fff;
        }

        .toast-info {
            background: #1565c0;
            color: #fff;
        }

        .toast-icon {
            font-size: 16px;
        }

        .toast-message {
            flex: 1;
        }

        .toast-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            opacity: 0.7;
        }

        .toast-close:hover {
            opacity: 1;
        }

        /* Statistics bar */
        .stats-bar {
            background: #252526;
            padding: 6px 12px;
            border-radius: 4px;
            margin-bottom: 4px;
            display: flex;
            gap: 20px;
            font-size: 11px;
            align-items: center;
            flex-wrap: wrap;
        }

        .stat-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .stat-label {
            color: #858585;
        }

        .stat-value {
            color: #4ec9b0;
            font-weight: bold;
        }

        /* Performance warning */
        .performance-warning {
            background: #5c3d00;
            border: 1px solid #ffa500;
            color: #ffa500;
            padding: 8px 12px;
            border-radius: 4px;
            margin-bottom: 4px;
            font-size: 11px;
            align-items: center;
            gap: 8px;
            display: none;
        }

        .performance-warning.visible {
            display: flex;
        }

        /* Back to live button */
        .back-to-live-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #0e639c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            z-index: 100;
            display: none;
            align-items: center;
            gap: 4px;
        }

        .back-to-live-btn.visible {
            display: flex;
        }

        .back-to-live-btn:hover {
            background: #1177bb;
        }

        .back-to-live-btn .live-dot {
            width: 8px;
            height: 8px;
            background: #4caf50;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        /* Syntax highlighting colors */
        .syntax-string {
            color: #ce9178;
        }

        .syntax-number {
            color: #b5cea8;
        }

        .syntax-boolean {
            color: #569cd6;
        }

        .syntax-null {
            color: #569cd6;
        }

        .syntax-key {
            color: #9cdcfe;
        }

        .syntax-bracket {
            color: #ffd700;
        }

        /* Settings toggle */
        .setting-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .setting-toggle label {
            color: #858585;
            font-size: 11px;
            cursor: pointer;
        }

        .setting-toggle input[type="checkbox"] {
            width: 14px;
            height: 14px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="disconnect-overlay" id="disconnectOverlay">
        <div class="icon">&#x26A0;</div>
        <h2>Connection Lost</h2>
        <p>WebSocket disconnected from the server</p>
        <div class="reconnect-info" id="reconnectInfo">Reconnecting in 3s...</div>
    </div>

    <!-- Line filter modal -->
    <div class="modal-overlay" id="lineFilterModal">
        <div class="modal">
            <h3 id="modalTitle">Line Filter for file.ts</h3>
            <p>Specify line ranges to display logs only from those lines.</p>
            <div class="line-ranges-container" id="lineRangesContainer"></div>
            <button class="success small" id="addRangeBtn">+ Add Range</button>
            <div class="modal-buttons">
                <button class="secondary" id="cancelModalBtn">Cancel</button>
                <button class="danger" id="clearRangesBtn">Clear All</button>
                <button id="saveRangesBtn">Save</button>
            </div>
        </div>
    </div>

    <!-- Check editor modal -->
    <div class="modal-overlay" id="checkModal">
        <div class="modal check-modal">
            <h3 id="checkModalTitle">Create Check</h3>
            <input type="text" id="checkNameInput" placeholder="Check name (e.g., 'Has error property')">
            <div class="check-params">
                <strong>Function parameters:</strong><br>
                <code>date</code>: Date, <code>type</code>: string, <code>callLine</code>: string, <code>argList</code>: any[], <code>boundDatas</code>: object<br>
                <strong>Must return:</strong> boolean<br>
                <strong>Note:</strong> Checks taking >25ms will be automatically disabled (killswitch).
            </div>
            <textarea id="checkCodeInput" placeholder="// Write your check logic here
// Example: return argList.some(arg => typeof arg === 'object' && arg?.error);
return true;"></textarea>
            <div class="modal-buttons">
                <button class="secondary" id="cancelCheckBtn">Cancel</button>
                <button id="saveCheckBtn">Save Check</button>
            </div>
        </div>
    </div>

    <!-- Log detail popup -->
    <div class="log-detail-overlay" id="logDetailOverlay">
        <div class="log-detail-header">
            <h2>Log Details</h2>
            <button class="close-btn" id="closeLogDetail">&times;</button>
        </div>
        <div class="log-detail-content" id="logDetailContent"></div>
    </div>

    <div class="main-layout">
        <!-- Logs panel (left, takes majority of space) -->
        <div class="logs-panel">
            <div class="header">
                <h1>LoggyLogger</h1>
                <div class="status">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="statusText">Disconnected</span>
                </div>
            </div>

            <div class="controls">
                <button id="connectBtn">Connect</button>
                <button id="disconnectBtn" disabled>Disconnect</button>
                <button id="clearBtn">Clear</button>
                <button id="recordBtn">Record</button>
                <div class="filter-container">
                    <input type="text" class="filter-input" id="filterInput" placeholder="Search logs...">
                    <button class="filter-toggle" id="regexToggle" title="Toggle regex mode">.*</button>
                </div>
            </div>

            <div class="logs-header">
                <div class="stats">
                    <span>Total: <strong id="totalCount">0</strong></span>
                    <span>Displayed: <strong id="visibleCount">0</strong></span>
                    <span>Buffer: <strong id="bufferInfo">1000</strong></span>
                </div>
                <div class="display-mode-toggle">
                    <button class="display-mode-btn" data-mode="inline">Inline</button>
                    <button class="display-mode-btn active" data-mode="box">Box</button>
                </div>
                <div class="checks-results" id="checksResults"></div>
            </div>

            <div class="stats-bar">
                <div class="stat-group">
                    <span class="stat-label">Received:</span>
                    <span class="stat-value" id="logsPerSecondReceived">0</span><span class="stat-label">/s</span>
                    <span class="stat-value" id="logsPerMinuteReceived">0</span><span class="stat-label">/m</span>
                </div>
                <div class="stat-group">
                    <span class="stat-label">Displayed:</span>
                    <span class="stat-value" id="logsPerSecondDisplayed">0</span><span class="stat-label">/s</span>
                    <span class="stat-value" id="logsPerMinuteDisplayed">0</span><span class="stat-label">/m</span>
                </div>
                <div class="stat-group">
                    <span class="stat-label">Roadtrip:</span>
                    <span class="stat-value" id="lastRoadtripDelay">-</span>
                </div>
                <div class="stat-group">
                    <span class="stat-label">Avg Render:</span>
                    <span class="stat-value" id="avgRenderTime">0</span><span class="stat-label">ms</span>
                    <span class="stat-label">(<span class="stat-value" id="avgChecksTime">0</span>ms checks)</span>
                </div>
                <div class="stat-group">
                    <span class="stat-label">Last:</span>
                    <span class="stat-value" id="lastRenderTime">0</span><span class="stat-label">ms</span>
                    <span class="stat-label">(<span class="stat-value" id="lastChecksTime">0</span>ms checks)</span>
                </div>
            </div>

            <div class="performance-warning" id="performanceWarning">
                <span class="warning-icon">&#x1F198;</span>
                <span class="warning-text">Page can't keep up with incoming logs. Consider disabling checks or some filters. Running <span class="warning-amount" id="performanceWarningAmount"></span> ms behind. (Last ping <span class="warning-amount" id="performanceWarningPing"></span> s ago)</span>
            </div>
            <div class="performance-warning" id="performanceWarning_recommendation_checks">
                <span class="warning-icon">&#x26A0;</span>
                <span class="warning-text"><b>Warning: Your checks are too heavy to execute.</b><br>Please consider lowering buffer, disabling some checks or refactoring your code to run faster.<br>Remember that checks must be ultra-optimized snippets. (<span class="warning-amount" id="performanceWarning_recommendation_checks_text"></span>)</span>
            </div>
            <div class="performance-warning" id="performanceWarning_recommendation_display">
                <span class="warning-icon">&#x2139;</span>
                <span class="warning-text">
                    <b>Warning: High log display amount detected.</b> This might cause lag.<br>Please consider lowering depth or buffer size, or disable some log levels to improve performance.
                </span>
            </div>

            <div class="logs-container" id="logsContainer">
                <button class="back-to-live-btn" id="backToLiveBtn">
                    <span class="live-dot"></span>
                    Back to Live
                </button>
                <div class="empty-state">No logs received. Connect to WebSocket to start.</div>
                <div class="scroll-indicator" id="scrollIndicator">New logs - Click to scroll down</div>
            </div>
        </div>

        <!-- Settings panel (right, compact) -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-section">
                <h3>
                    Log Levels
                    <div class="quick-select-btns">
                        <button class="small secondary" id="selectAllLevels">All</button>
                        <button class="small secondary" id="selectNoneLevels">None</button>
                        <button class="small secondary" id="selectInfoAndAbove">Info+</button>
                    </div>
                </h3>
                <div class="log-level-buttons" id="logLevelButtons">
                    <button class="log-level-btn log-silly" data-level="silly">Silly</button>
                    <button class="log-level-btn log-verbose" data-level="verbose">Verbose</button>
                    <button class="log-level-btn log-debug" data-level="debug">Debug</button>
                    <button class="log-level-btn log-log" data-level="log">Log</button>
                    <button class="log-level-btn log-info active" data-level="info">Info</button>
                    <button class="log-level-btn log-success active" data-level="success">Success</button>
                    <button class="log-level-btn log-warn active" data-level="warn">Warn</button>
                    <button class="log-level-btn log-error active" data-level="error">Error</button>
                    <button class="log-level-btn log-fatal active" data-level="fatal">Fatal</button>
                </div>
            </div>

            <div class="settings-section">
                <h3>
                    Files
                    <button class="small secondary" id="clearFilesBtn">Clear</button>
                </h3>
                <input type="text" class="file-filter-input" id="fileFilterInput" placeholder="Filter files...">
                <div class="file-list" id="fileList">
                    <div class="empty-state" style="padding: 15px; font-size: 11px;">Loading files...</div>
                </div>
                <div class="selected-files-info" id="selectedFilesInfo">No files selected</div>
            </div>

            <div class="settings-section">
                <h3>Display</h3>
                <div class="slider-group">
                    <label>Depth:</label>
                    <input type="range" class="slider" id="depthSlider" min="0" max="6" value="2">
                    <span class="slider-value" id="depthValue">2</span>
                </div>
                <div class="slider-group">
                    <label>Buffer:</label>
                    <input type="range" class="slider" id="bufferSlider" min="0" max="5" value="2">
                    <span class="slider-value" id="bufferValue">1000</span>
                </div>
                <div class="setting-toggle">
                    <input type="checkbox" id="syntaxHighlightToggle">
                    <label for="syntaxHighlightToggle">Enable syntax highlighting</label>
                </div>
            </div>

            <div class="settings-section">
                <h3>
                    Checks
                    <div class="checks-header-actions">
                        <span style="font-size: 10px; color: #858585;" id="checksCount">0/100</span>
                        <button class="small warning" id="disableAllChecksBtn" title="Disable all checks">Disable All</button>
                    </div>
                </h3>
                <div class="checks-container" id="checksContainer">
                    <div style="font-size: 11px; color: #858585; padding: 10px; text-align: center;">No checks defined</div>
                </div>
                <button class="add-check-btn success small" id="addCheckBtn">+ Add Check</button>
            </div>

            <div class="settings-section">
                <h3>Filter by Checks</h3>
                <p style="font-size: 10px; color: #858585; margin-bottom: 8px;">Only show logs where selected checks pass</p>
                <div class="checks-filter-container" id="checksFilterContainer">
                    <span style="font-size: 11px; color: #666;">No checks available</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Load modular JavaScript files -->
    <script src="/assets/utils.js"></script>
    <script src="/assets/dom-manager.js"></script>
    <script src="/assets/toast.js"></script>
    <script src="/assets/performance-monitor.js"></script>
    <script src="/assets/checks-manager.js"></script>
    <script src="/assets/log-renderer.js"></script>
    <script src="/assets/settings-manager.js"></script>
    <script src="/assets/websocket-manager.js"></script>
    <script src="/assets/app.js"></script>
</body>
</html>
